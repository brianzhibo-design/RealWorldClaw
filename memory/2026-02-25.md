# 2026-02-25

## 持续推进（12:40 Asia/Shanghai）
- 补强 Spaces 契约一致性回归：`platform/tests/test_regression_matrix.py`
  - 在 `test_spaces_create_contract_includes_display_name` 中新增 `GET /api/v1/spaces` 列表断言，确保创建后的 `display_name` 在列表接口保持一致。
- 运营增长任务：更新 `docs/community/seed-posts.md`
  - 新增 Post 21，主题为 WebSocket 鉴权加固与回归矩阵结果（真实工程进展素材）。

## 验证
- `python3 -m pytest platform/tests/test_regression_matrix.py -q` -> 14 passed
- `python3 -m pytest tests/ -x -q` -> 2 passed, 1 skipped
- `npm --prefix frontend run build` -> success
- Merge Checklist grep + 首页保护通过（`frontend/app/page.tsx` 无改动）

## 持续推进（12:50 Asia/Shanghai）
- 第一批遗留迁移页清理推进（P0/P1-6 子项）：
  - `frontend/app/makers/register/page.tsx` 注册成功跳转从 `/maker-orders` 改为 `/orders`，对齐现行 IA，减少历史路径噪音。
- 运营增长任务：
  - `docs/community/seed-posts.md` 新增 Post 22（Legacy route debt -> UX/转化一致性）。

## 验证（12:50）
- `python3 -m pytest platform/tests/test_regression_matrix.py -q` -> 14 passed
- `npm --prefix frontend run build` -> success
- Merge Checklist grep 全部零命中；首页保护通过（`frontend/app/page.tsx` 无改动）

## 发布流程状态
- 当前分支仅有工作树改动，无未发布本地 commit（`git status --branch` 无 ahead）；按流程暂不触发慢羊羊复审，不执行 push / deploy。

## 持续推进（13:00 Asia/Shanghai）
- 约束纠偏：发现工作树存在首页文件 `frontend/app/page.tsx` 改动，已立即回滚，确保“首页未获批准不改动”硬约束不被破坏。
- 质量修复：去除 OAuth 流程中的占位式 `Coming Soon` 提示，改为真实可执行错误反馈：
  - `frontend/components/oauth/GoogleOAuthButton.tsx`
  - `frontend/components/oauth/GitHubOAuthButton.tsx`

## 验证（13:00）
- `python3 -m pytest tests/ -x -q` -> 2 passed, 1 skipped
- `npm --prefix frontend run build` -> success
- Merge Checklist grep 与首页保护均通过（`frontend/app/page.tsx` 无改动）

## 发布流程状态
- 当前分支无未发布本地 commit（无 ahead），因此本轮不触发慢羊羊复审，不执行 push / deploy。

## 持续推进（13:10 Asia/Shanghai）
- 第一批遗留迁移页治理补齐（P0/P1-6）：
  - `frontend/next.config.mjs` 新增永久重定向整族规则：
    - `/devices/:path* -> /map/:path*`
    - `/maker-orders/:path* -> /orders/:path*`
  - 目标：避免仅根路径迁移导致历史深链继续 404 / 分流。
- 运营增长任务：
  - `docs/community/seed-posts.md` 新增 Post 23（“Redirects should migrate families, not just homepages”），沉淀真实工程素材。

## 验证（13:10）
- `python3 -m pytest tests/ -x -q` -> 2 passed, 1 skipped
- `npm --prefix frontend run build` -> success
- Merge Checklist grep 全部零命中；首页保护通过（`frontend/app/page.tsx` 无改动）

## 发布流程状态
- 仍为工作树改动，无未发布本地 commit（`main...origin/main` 无 ahead）；按流程本轮不触发慢羊羊复审，不执行 push / deploy。

## 持续推进（13:20 Asia/Shanghai）
- 第一批 P0/P1-3 文件下载安全项闭环：
  - `platform/api/routers/files.py` 在 `/api/v1/files/{file_id}/download` 增加上传者作用域校验（`uploader_id + uploader_type`）。
  - 结果：从“仅鉴权”升级为“鉴权 + 最小权限”，跨用户访问返回 `403 Forbidden`。
- 回归矩阵补强：
  - `platform/tests/test_regression_matrix.py` 新增 `test_files_download_forbidden_for_non_uploader`。
- 运营增长任务：
  - `docs/community/seed-posts.md` 新增 Post 24（文件下载所有权鉴权修复复盘，真实工程素材）。

## 验证（13:20）
- `python3 -m pytest platform/tests/test_regression_matrix.py -q` -> 15 passed
- `python3 -m pytest tests/ -x -q` -> 2 passed, 1 skipped
- `npm --prefix frontend run build` -> success
- Merge Checklist grep 全部零命中；首页保护通过（`frontend/app/page.tsx` 无改动）

## 发布流程状态
- 当前仍为工作树改动，无未发布本地 commit（`main...origin/main` 无 ahead）；按公司流程不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 13:30 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码/结构任务：清理遗留迁移路由空目录 `frontend/app/devices` 与 `frontend/app/maker-orders`，防止旧路由骨架回流。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 25（迁移债清理工程复盘）。
- 文档同步：更新 `docs/governance/perfection-standard.md` 第一批状态（1/4/5/6 标记闭环）与执行记录；更新 `docs/governance/WORK-QUEUE.md` 当前状态。
- 流程遵守：本轮无 ahead commit，按规范不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 13:40 持续推进
- 按引擎流程复核优先级（P2-9 回归矩阵仍进行中）并执行 1 个代码任务：在 `platform/tests/test_regression_matrix.py` 新增 `test_ws_rejects_cross_user_orders_subscription`，验证用户 A token 订阅用户 B 订单频道会被 4003 拒绝。
- 执行 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 26（WS 订单频道授权闭环复盘），补充真实社区素材。
- 验证：`python3 -m pytest platform/tests/test_regression_matrix.py -q` -> `16 passed`。
- 文档同步：更新 `docs/governance/perfection-standard.md` 与 `docs/governance/WORK-QUEUE.md` 的 13:40 记录。
- 流程遵守：当前 `main...origin/main` 无 ahead commit，本轮不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 13:50 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 仍为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码任务：在 `platform/tests/test_regression_matrix.py` 新增 `test_ws_rejects_cross_user_printer_subscription`，补齐 printer 频道跨用户订阅拒绝(4003)边界覆盖。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 27（打印机频道授权闭环复盘）。
- 验证：`python3 -m pytest platform/tests/test_regression_matrix.py -q` -> `17 passed`；`frontend/app/page.tsx` 无改动。
- 文档同步：更新 `docs/governance/perfection-standard.md`、`docs/governance/WORK-QUEUE.md`、`docs/governance/memory.md`。
- 流程遵守：本轮无 ahead commit，按流程不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 14:00 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码任务：在 `platform/tests/test_regression_matrix.py` 新增 `test_social_follow_lifecycle_updates_is_following_state`，补齐 social 关注状态流转（false→true→false）回归覆盖。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 28（社交状态契约回归闭环复盘）。
- 验证：`python3 -m pytest platform/tests/test_regression_matrix.py -q` -> `18 passed`；`frontend/app/page.tsx` 无改动。
- 文档同步：更新 `docs/governance/perfection-standard.md`、`docs/governance/WORK-QUEUE.md`、`docs/governance/memory.md`。
- 流程遵守：本轮无 ahead commit，按流程不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 14:10 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码任务：在 `platform/tests/test_regression_matrix.py` 新增 `test_search_type_node_only_excludes_posts_and_users`，补齐 search 窄过滤契约回归（`type=node` 下 posts/users 为空且 total 对齐 spaces）。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 29（Search filter contract 回归闭环复盘）。
- 验证：`python3 -m pytest platform/tests/test_regression_matrix.py -q` -> `19 passed`；`frontend/app/page.tsx` 无改动。
- 文档同步：更新 `docs/governance/perfection-standard.md`、`docs/governance/WORK-QUEUE.md`、`docs/governance/memory.md`。
- 流程遵守：本轮无 ahead commit，按流程不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 14:20 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 仍为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码任务：在 `platform/tests/test_regression_matrix.py` 新增 `test_ws_accepts_notifications_subscription_for_token_owner`，补齐 notifications 频道正向鉴权覆盖，和既有 4003 拒绝用例组成双向契约。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 30（Notifications 正向鉴权回归闭环复盘）。
- 验证：`python3 -m pytest platform/tests/test_regression_matrix.py -q` -> `20 passed`；`frontend/app/page.tsx` 无改动。
- 文档同步：更新 `docs/governance/perfection-standard.md`、`docs/governance/WORK-QUEUE.md`、`docs/governance/memory.md`。
- 流程遵守：本轮无 ahead commit，按流程不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 14:30 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码任务：在 `platform/tests/test_regression_matrix.py` 新增 `test_ws_accepts_printer_subscription_for_token_owner`，补齐 printer 频道正向鉴权覆盖，与既有 `test_ws_rejects_cross_user_printer_subscription` 组成“允许+拒绝”双向契约。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 31（Printer WS 鉴权闭环复盘）。
- 验证：`JWT_SECRET_KEY=test-secret python3 -m pytest platform/tests/test_regression_matrix.py -q` -> `21 passed`；`frontend/app/page.tsx` 无改动。
- 文档同步：已更新 `docs/governance/perfection-standard.md`、`docs/governance/WORK-QUEUE.md`、`memory/2026-02-25.md`。
- 流程遵守：本轮无 ahead commit，按流程不触发慢羊羊复审，不 push / 不 deploy。

## 2026-02-25 14:40 持续推进
- 按引擎流程先读 `docs/governance/perfection-standard.md` 与 `docs/governance/company-process.md`，并确认 `git status --short --branch` 仍为 `## main...origin/main`（无未发布本地 commit）。
- 完成 1 个代码任务：验证 Agent API key 安全链路（`platform/api/api_keys.py` + 相关路由/鉴权修改）及其回归边界，重点覆盖 key 哈希存储、旧明文兼容、跨 agent 轮换拒绝。
- 完成 1 个运营增长任务：`docs/community/seed-posts.md` 新增 Post 32（Agent key 哈希化与 rotation 权限闭环复盘）。
- 验证：`JWT_SECRET_KEY=test-secret python3 -m pytest platform/tests/test_ws_manager.py platform/tests/test_agents.py platform/tests/test_regression_matrix.py -q` -> `38 passed`；`npm --prefix frontend run build` -> success；Merge Checklist grep + 首页保护通过。
- 文档同步：已更新 `docs/governance/perfection-standard.md`、`docs/governance/WORK-QUEUE.md`、`memory/2026-02-25.md`。
- 流程遵守：本轮无 ahead commit，按流程不触发慢羊羊复审，不 push / 不 deploy。
