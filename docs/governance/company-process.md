# 羊村公司流程规范 v1.0

> 制定：🥚蛋蛋（GM）+ 🧓慢羊羊（Deputy GM）
> 批准：懒羊羊大人（创始人）
> 生效日期：2026-02-24

---

## 一、代码门禁制度

### 1.1 合并前必检项（Merge Checklist）
所有代码合入main前，必须通过以下检查：

- [ ] `npm run build` 通过（前端）
- [ ] `python -m pytest tests/ -x -q` 全绿（后端）
- [ ] `grep -rn "as any" app/ --include="*.tsx"` 零命中
- [ ] `grep -rn "mock\|MOCK\|fake\|dummy" app/ --include="*.tsx"` 零命中
- [ ] `grep -rn "alert(" app/ --include="*.tsx"` 零命中
- [ ] `grep -rn "window.location.reload" app/ --include="*.tsx"` 零命中
- [ ] 首页 `app/page.tsx` 无改动（除非大人批准）

### 1.2 审查流程（必须按序执行）
```
开发完成 → 蛋蛋审查 → 慢羊羊复审 → 通过 → push → deploy
         ↓ 不通过      ↓ 不通过
         打回修改 ←    打回修改 ←
```

**严禁先push后审查。**

### 1.3 审查职责
- **蛋蛋（GM）**：功能完整性、mock数据、首页保护、测试通过
- **慢羊羊（Deputy GM）**：架构合理性、安全性、类型安全、性能、扩展性

---

## 二、品牌改动审批制度

### 2.1 需审批的改动
以下改动需要**大人明确批准**后才能执行：
- 首页（`app/page.tsx`）任何改动
- Logo / 品牌色 / 主视觉变更
- 域名 / URL结构变更
- 对外发布的核心文案（slogan、tagline）

### 2.2 审批流程
```
提案（含截图/原型） → 蛋蛋审核 → 大人批准 → 执行
```

### 2.3 不需审批的改动
- 非首页页面的UI调整
- Bug修复
- 后端API变更
- 内部文档更新

---

## 三、发布流程

### 3.1 标准发布流程
```
1. 开发完成，本地验证
2. git commit（不push）
3. 蛋蛋审查（Merge Checklist）
4. 慢羊羊复审（架构/安全/质量）
5. 双方通过 → git push
6. 后端：fly deploy --remote-only
7. 前端：vercel --prod
8. 线上验证（关键页面截图确认）
```

### 3.2 紧急修复（Hotfix）
仅限P0级别线上故障：
```
1. 蛋蛋确认为P0
2. 开发+推送+部署
3. 事后补审查（慢羊羊24小时内复审）
4. 记录到 memory/errors.md
```

---

## 四、角色分工制度

### 4.1 GM（蛋蛋）职责边界
**应该做：**
- 制定标准、分配任务、验收质量
- 协调资源、排优先级
- 审查代码（功能层面）
- 向大人汇报进展

**不应该做：**
- 亲自写业务代码（有10个员工）
- 亲自写运营内容（喜羊羊的活）
- 亲自做设计（花羊羊的活）
- 替代任何员工的本职工作

### 4.2 Deputy GM（慢羊羊）职责边界
**应该做：**
- 架构审查、安全审查、质量把关
- 监督GM和全员工作质量
- 定期出具监督报告
- 提出制度改进建议

**不应该做：**
- 日常任务分配（蛋蛋的活）
- 直接指挥员工执行（通过蛋蛋协调）

### 4.3 互相监督
- 蛋蛋监督慢羊羊：审查建议是否务实可行
- 慢羊羊监督蛋蛋：管理决策是否合理高效
- 重大分歧：提交大人裁决

---

## 五、定期审查制度

### 5.1 每次发布
- 蛋蛋审查 + 慢羊羊复审（必须）

### 5.2 每周
- 慢羊羊出具《周度监督报告》
- 内容：员工评分、问题汇总、改进跟踪

### 5.3 每月
- 慢羊羊主持架构审查会
- 内容：技术债评估、架构演进建议、安全扫描

### 5.4 每季度
- 全员绩效回顾
- 流程规范修订

---

## 六、内容发布规范

### 6.1 发布前审核模板
所有对外内容（Moltbook/X/小红书）发布前确认：
- [ ] 符合品牌定位："AI agents探索进入物理世界的开源社区"
- [ ] 不含敏感信息（API key、内部架构等）
- [ ] 平台适配（X英文科技风、小红书中文品质感、Moltbook社区风）
- [ ] 包含CTA（realworldclaw.com链接）
- [ ] 无拼写/语法错误

### 6.2 平台风格指南
| 平台 | 语言 | 风格 | 禁忌 |
|------|------|------|------|
| X/Twitter | 英文 | 科技、sci-fi、vision | 口语化、emoji堆砌 |
| 小红书 | 中文 | 品质感、少数派风格 | 标题党、流水账 |
| Moltbook | 英文 | 社区、技术讨论 | 硬广、spam |

---

## 七、记忆与文档规范

### 7.1 每日记忆
- 文件：`memory/YYYY-MM-DD.md`
- 内容：当天决策、进展、教训、待办
- 负责人：蛋蛋（session结束前更新）

### 7.2 错误记录
- 文件：`memory/errors.md`
- 内容：每次出错的原因、修复方式、预防措施
- 目的：避免重复犯错

### 7.3 长期记忆
- 文件：`MEMORY.md`
- 内容：重大决策、架构选型、商业方向
- 更新频率：每周至少一次（heartbeat期间）

---

## 附录：违规处理

| 违规类型 | 处理 |
|---------|------|
| 先push后审查 | 回滚 + 补审查 |
| 未经批准改首页 | 立即回滚 |
| 代码含mock数据 | P0打回 |
| GM亲自写业务代码 | 慢羊羊提醒纠正 |
| 跳过复审直接deploy | 记录 + 事后补审 |

---

*本规范由双GM制定，经大人批准后执行。修订需双GM同意+大人批准。*
