# RealWorldClaw 模块接口标准（草案）

> 蛋蛋 | 2026-02-20 深夜 | 第一版草案，待讨论

---

## 设计目标

1. **小白也能用** — 插上就能用，不需要看datasheet
2. **3D打印友好** — 精度要求在FDM能力范围内（±0.2mm）
3. **成本极低** — 每个连接器成本<¥2
4. **足够灵活** — 能做桌面助手也能做六足蜘蛛
5. **可扩展** — 未来加新模块不需要改标准

---

## 核心决策

### 决策1：连接方式

| 方案 | 优点 | 缺点 | 适合我们吗？ |
|------|------|------|------------|
| **磁吸+Pogo Pin** | 盲插、酷、手感好 | 贵(¥5-10/对)、承重弱 | 适合小型桌面设备 |
| **卡扣+弹簧针** | 便宜、牢固 | 需要对齐、有方向 | 适合通用场景 |
| **JST连接器+螺丝固定** | 最便宜(¥0.5)、最可靠 | 不酷、需要工具 | 适合量产但不极客 |
| **USB-C菊花链** | 标准化、热插拔 | 成本中等、线缆多 | 适合分体式 |
| **PCB板对板连接器** | 紧凑、可靠 | 需要PCB对齐 | 适合堆叠式 |

**我的倾向：两种连接方式并存**
- **模块间（电气）**：统一用JST-XH 2.54mm连接器——便宜、可靠、到处能买到
- **结构固定（机械）**：M3螺丝+定位柱——3D打印精度完全够，牢固

为什么不用磁吸？因为要"让3D打印走进千家万户"——磁吸Pogo Pin每对¥5-10，大规模不现实。JST插头¥0.3一个。

### 决策2：电气标准

| 参数 | 选择 | 理由 |
|------|------|------|
| **逻辑电压** | 3.3V | ESP32/RPi都是3.3V，统一 |
| **电源总线** | 5V（USB供电） | 通过USB-C输入，内部LDO降到3.3V |
| **通信总线** | I2C（主要）| 两根线、多设备、够用 |
| **备用通信** | SPI（高带宽设备）| 屏幕、摄像头用 |
| **PWM输出** | 独立GPIO | 舵机/电机需要 |

### 决策3：统一接口定义

**RWC Bus（RealWorldClaw总线）**

6pin接口，所有模块统一：
```
Pin 1: VCC (5V)
Pin 2: GND
Pin 3: SDA (I2C数据)
Pin 4: SCL (I2C时钟)
Pin 5: GP_A (通用GPIO/PWM/ADC，由模块定义)
Pin 6: GP_B (通用GPIO/PWM/ADC，由模块定义)
```

为什么6pin而不是4pin？
- 4pin（Grove/Qwiic）只有I2C，接舵机就不行
- 6pin多两个通用GPIO，舵机/电机/模拟传感器都能接
- 比8pin/10pin简单便宜

物理连接器：**JST-XH 6pin 2.54mm**
- 成本：¥0.5/对
- 到处能买到
- 有防呆（反插不进去）
- 2.54mm间距，万用板/面包板友好

### 决策4：模块尺寸

**基础网格：20mm × 20mm**

模块尺寸为20mm的倍数：
- 1U = 20×20mm（最小模块，如LED、按钮）
- 2U = 20×40mm（传感器、小屏幕）
- 4U = 40×40mm（主控板、大屏幕）
- 自定义（Motor等特殊模块）

固定孔位：四角M3孔，间距为(尺寸-4mm)
- 1U: 16×16mm孔距（太小，可能只有2个孔）
- 2U: 16×36mm孔距
- 4U: 36×36mm孔距

### 决策5：模块自动识别

每个模块的I2C EEPROM（AT24C02，¥0.3）存储：
```json
{
  "module_id": "rwc-display-096",
  "type": "display",
  "version": "1.0",
  "i2c_addr": "0x3C",
  "pins": {"GP_A": "backlight_pwm", "GP_B": "nc"}
}
```

主控上电时扫描I2C总线，自动发现所有模块。
用户不需要配置任何东西——插上就识别。

---

## 核心模块定义（Phase 1）

### Core Module（主控模块）— 4U
- ESP32-S3-WROOM-1（¥15-20）
- USB-C供电+烧录
- 板载Wi-Fi+BLE
- 3个RWC Bus接口（可接3个模块）
- 1个电池接口（JST-PH 2pin）
- 状态LED×1
- Reset按钮×1
- 预估成本：¥25（含PCB）

### Power Module（电源模块）— 2U
- TP4056充电管理
- 3.7V锂电池座（18650或软包）
- 5V升压输出
- 电量指示LED
- 开关
- RWC Bus直通（供电给其他模块）
- 预估成本：¥12（不含电池）

### Display Module（显示模块）— 2U
- 0.96" OLED 128×64（I2C，SSD1306）
- 或1.3" OLED 128×64（升级版）
- RWC Bus接口
- GP_A用作背光PWM（LCD版本）
- 预估成本：¥8-12

### Audio Module（音频模块）— 2U
- INMP441 I2S数字麦克风
- MAX98357A I2S功放 + 3W喇叭
- RWC Bus接口（GP_A=I2S_WS, GP_B=I2S_DATA）
- 预估成本：¥15

### Servo Module（舵机模块）— 2U
- PCA9685 16通道PWM驱动器（I2C控制）
- 最多接4个SG90舵机
- 独立5V舵机供电（不走RWC Bus电源，防止电流干扰）
- 外接电源输入（5V 2A）
- 预估成本：¥8（不含舵机）

### Sensor Module（传感器模块）— 1U
- SHT30温湿度 + BH1750光照
- I2C总线
- 预估成本：¥8

---

## 参考设计举例

### "桌面AI助手"（最简配置）
- Core(¥25) + Display(¥10) + Audio(¥15)
- 结构件：一个3D打印的小底座（社区设计）
- 总计：**¥50 + 打印件**
- 能力：Wi-Fi联网、显示表情、语音对话

### "六足行走者"
- Core(¥25) + Power(¥12) + Servo(¥8) + SG90×6(¥30) + Display(¥10)
- 结构件：六足底盘+6条腿（打印）
- 总计：**¥85 + 打印件**
- 能力：自主行走、避障、表情显示

### "环境哨兵"
- Core(¥25) + Power(¥12) + Sensor(¥8) + Display(¥10)
- 结构件：墙挂盒子（打印）
- 总计：**¥55 + 打印件**
- 能力：温湿度监测、光照感知、远程查看

---

## 开放问题

1. RWC Bus用6pin够不够？需不需要8pin？
2. 模块间要不要支持菊花链（串联）而不只是星型（全接主控）？
3. 要不要出自己的PCB，还是基于现有开发板+转接板？
4. 模块外壳的3D打印设计规范——壁厚、卡扣尺寸、散热孔
5. 固件框架——统一的模块驱动架构

---

*这是草案，需要沸羊羊的调研结果来验证/调整。*
