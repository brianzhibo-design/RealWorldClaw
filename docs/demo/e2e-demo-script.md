# RealWorldClaw 端到端演示脚本（ESP32 + DHT22）

> 目标：录一条“设备注册 → 遥测上报 → Agent读取 → Agent控制 → Dashboard展示”的可信演示视频（3–6 分钟）

## 1) 演示目标与叙事主线

一句话主线：**真实（或近真实）硬件数据进入平台，AI Agent读数后触发控制命令，前端可见全过程。**

建议场景：
- 温湿度传感（DHT22）+ 继电器（模拟风扇）
- 规则：温度 > 28°C 时，Agent 下发 `relay_on`

---

## 2) 硬件清单（真实拍摄版）

- ESP32 开发板（推荐 ESP32 DevKitC）×1
- DHT22 温湿度传感器 ×1
- 1 路继电器模块（3.3V 触发兼容）×1
- 面包板 + 杜邦线若干
- USB 数据线 ×1
- 5V 供电（可由 USB 提供）
- （可选）小风扇/LED 负载，用于直观看到继电器动作

---

## 3) 接线图（文字版）

> 以下按常见 ESP32 引脚示例，可按固件配置调整。

### DHT22
- DHT22 VCC → ESP32 3V3
- DHT22 GND → ESP32 GND
- DHT22 DATA → ESP32 GPIO4
- 若是裸 DHT22（非模块板），DATA 与 3V3 间加 10k 上拉电阻

### Relay
- Relay VCC → ESP32 5V（或模块要求电压）
- Relay GND → ESP32 GND（共地）
- Relay IN → ESP32 GPIO5

### 负载侧（可选）
- 低压负载优先（如 5V 风扇/LED）
- 强电请勿在演示中裸露接线，确保安全

---

## 4) 演示分镜（逐步）

## Step A — 设备/Agent准备（10–20s）
**画面**：桌面硬件近景 + 终端窗口（或 API 文档页面）

**旁白要点**：
- 这是 ESP32 + DHT22 + Relay
- 目标是让平台读到温湿度，并由 Agent 决策控制继电器

---

## Step B — Agent 注册（20–30s）
**画面**：终端执行注册命令，返回 `api_key` / `agent_id`

**预期画面**：
- `POST /api/v1/agents/register` 返回成功
- 高亮 `agent_id`

**建议镜头**：
- 终端放大（字体 >= 18）
- 打码敏感 token

---

## Step C — 设备注册（20–30s）
**画面**：终端执行设备注册，返回 `device_id` / `device_token`

**预期画面**：
- 注册成功 JSON
- 明确这个 token 给设备端使用

---

## Step D — 遥测上报（40–60s）
**画面**：
1) 串口日志/模拟器日志持续打印温湿度
2) API/后台显示最近遥测刷新

**预期画面**：
- 每 1~2 秒出现一条温度/湿度读数
- 平台显示设备在线、last_seen 更新

**动作建议**：
- 手捂 DHT22 几秒，让温度上升更明显（真实硬件版）

---

## Step E — Agent 读取并决策（30–45s）
**画面**：Agent 进程日志

**预期画面**：
- Agent 拉取设备状态（含 recent telemetry）
- 日志打印：`temperature=xx`，阈值判断通过

---

## Step F — Agent 下发控制命令（30–45s）
**画面**：
1) `POST /devices/{id}/command` 成功
2) 继电器动作（LED 亮/风扇转）

**预期画面**：
- 命令返回 `pending/ok`（按后端实现）
- 硬件上有可见反馈

---

## Step G — Dashboard 收口（20–30s）
**画面**：Dashboard 设备详情页

**预期画面**：
- 在线状态 + 最近温湿度曲线/列表
- 命令记录里出现 `relay_on`

**结束台词**：
- “这就是从真实世界到AI决策再回到现实控制的闭环。”

---

## 5) 录制要点与注意事项

- **一镜到底优先**：减少“剪辑造假感”
- **时间戳可见**：终端显示时间，增强真实性
- **敏感信息打码**：API key、device token
- **环境准备**：提前关通知、开勿扰、固定窗口布局
- **双机位建议**：
  - A机：屏幕录制（终端 + Dashboard）
  - B机：手机拍硬件近景（继电器动作）
- **失败预案**：准备一版“模拟器流程”可替补硬件缺失

---

## 6) 无硬件时的“可信替代”拍法

- 明确标注：`Demo Mode (Emulator)`
- 展示模拟器实时输出 + API 接收 + Dashboard 刷新
- 在结尾补一句：硬件版仅替换数据来源，API与Agent链路一致

---

## 7) 拍摄前 Checklist

- [ ] Agent 注册命令可用
- [ ] 设备注册命令可用
- [ ] 遥测链路可见（日志 + API）
- [ ] 控制命令链路可见（日志 + 状态变化）
- [ ] Dashboard 能展示设备状态与命令记录
- [ ] 关键 token 打码策略已设置
- [ ] 备份方案：模拟器可独立跑通
