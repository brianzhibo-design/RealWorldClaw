# Phase 1 æµ‹è¯•æŠ¥å‘Š â€” é—®é¢˜æ”¶é›†

**æµ‹è¯•äºº:** è›‹è›‹ğŸ¥š  
**æ—¥æœŸ:** 2026-02-23 23:47  

---

## ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆåŠŸèƒ½ä¸å¯ç”¨ï¼‰

### B1. è®¢å•è¯¦æƒ…é¡µå´©æºƒ â€” responseæ ¼å¼ä¸åŒ¹é…
**é¡µé¢:** `/orders/[id]`  
**åŸå› :** åç«¯ `GET /orders/{id}` è¿”å› `{role: "customer", order: {...}}`ï¼Œä½†å‰ç«¯ `apiFetch<Order>` ç›´æ¥å½“ Order å¯¹è±¡ç”¨ã€‚`order.status` å®é™…è®¿é—®çš„æ˜¯é¡¶å±‚çš„ `status`ï¼ˆä¸å­˜åœ¨ï¼‰ï¼Œå¯¼è‡´ `.toLowerCase()` æŠ¥é”™å´©æºƒã€‚  
**ä¿®å¤:** å‰ç«¯éœ€è¦è§£åŒ… `response.order` å† setOrderã€‚

### B2. è®¢å•å–æ¶ˆå¤±è´¥ â€” å‰ç«¯è°ƒç”¨é”™è¯¯ç«¯ç‚¹
**é¡µé¢:** `/orders/[id]`  
**åŸå› :** å‰ç«¯ç”¨ `PUT /orders/{id}/status {status:"cancelled"}`ï¼Œä½†åç«¯ PUT status åªå…è®¸ maker æ“ä½œã€‚ä¹°å®¶å–æ¶ˆåº”ç”¨ `POST /orders/{id}/cancel`ã€‚  
**ä¿®å¤:** å‰ç«¯å–æ¶ˆæŒ‰é’®æ”¹ä¸ºè°ƒç”¨ `POST /orders/{id}/cancel`ã€‚

### B3. ç¤¾åŒºæŠ•ç¥¨å¤±è´¥ â€” å­—æ®µåä¸åŒ¹é…
**å‰ç«¯:** å‘é€ `{vote_type: "up"}`  
**åç«¯schema:** VoteRequest å®šä¹‰å­—æ®µåä¸º `direction`  
**åç«¯ä»£ç :** `community.py:287` ç”¨ `vote.vote_type`ï¼ˆAttributeErrorï¼‰  
**ç»“æœ:** åŒé‡bug â€” schemaè¦`direction`ï¼Œä»£ç è¯»`vote_type`  
**ä¿®å¤:** ç»Ÿä¸€ä¸º `vote_type`ï¼ˆå‰ç«¯å·²ç”¨è¿™ä¸ªï¼‰ï¼š
1. VoteRequest å­—æ®µåæ”¹ä¸º `vote_type`
2. community.py:287 æ”¹ä¸º `vote.vote_type`ï¼ˆå·²ç»æ˜¯ï¼‰

### B4. è®¢å•çŠ¶æ€æ›´æ–° â€” pendingçŠ¶æ€æ— æ³•è½¬æ¢
**åç«¯:** `valid_transitions` å­—å…¸é‡Œæ²¡æœ‰ `"pending"` key  
**ç»“æœ:** makeræ¥å•åç”¨ `PUT /status` ä» pending å¼€å§‹è½¬æ¢ä¼šå¤±è´¥  
**ä¿®å¤:** valid_transitions æ·»åŠ  `"pending": ["accepted", "cancelled"]`  
æˆ–è€…å‰ç«¯æ¥å•èµ° `PUT /orders/{id}/accept`ï¼ˆä¸èµ°statusï¼‰

---

## ğŸŸ¡ ä¸­ç­‰é—®é¢˜ï¼ˆåŠŸèƒ½å—é™ï¼‰

### M1. è®¢å•åˆ›å»ºç¼ºçœåœ°å€å­—æ®µ
**é¡µé¢:** `/orders/new`  
å‰ç«¯ç¡¬ç¼–ç  `delivery_province:"â€”", delivery_city:"â€”", delivery_district:"â€”"`  
**ä¿®å¤:** åŠ çœå¸‚åŒºé€‰æ‹©å™¨ï¼Œæˆ–è‡³å°‘è®©ç”¨æˆ·æ‰‹åŠ¨å¡«

### M2. èŠ‚ç‚¹è¯¦æƒ…é¡µå­—æ®µåä¸åŒ¹é…
**é¡µé¢:** `/nodes/[id]`  
å‰ç«¯å¯èƒ½ç”¨ `buyer_id`/`maker_id` ç­‰å­—æ®µï¼Œä½†åç«¯èŠ‚ç‚¹è¿”å›çš„æ˜¯ `owner_id` æˆ–ä¸å«æ­¤å­—æ®µ  
**éªŒè¯:** å·²ç¡®è®¤åç«¯è¿”å›å­—æ®µæ­£ç¡®ï¼ˆfuzzy_latitudeç­‰ï¼‰ï¼Œä½†éœ€æ£€æŸ¥å‰ç«¯æ˜¯å¦æœ‰æœªå¯¹é½çš„å­—æ®µ

### M3. é¦–é¡µå¸–å­ä½œè€…ä»ç„¶æ˜¯ "Anonymous" 
**åŸå› :** åç«¯ `/community/posts` ä¸è¿”å› `author` å¯¹è±¡ï¼Œåªæœ‰ `author_id`  
**å½±å“:** é¦–é¡µå’Œç¤¾åŒºåˆ—è¡¨æ‰€æœ‰å¸–å­ä½œè€…éƒ½æ˜¾ç¤ºä¸º author_id å‰8ä½æˆ– Anonymous  
**ä¿®å¤:** åç«¯community posts JOIN usersè¡¨è¿”å›authorä¿¡æ¯

### M4. è®¢å•åˆ›å»ºæˆåŠŸåå“åº”æ ¼å¼
**åç«¯è¿”å›:** `OrderCreateResponse` åŒ…å« `order_id`ï¼ˆä¸æ˜¯ `id`ï¼‰  
**å‰ç«¯:** `router.push(/orders/${order.id})` â€” ä¼šè·³è½¬åˆ° `/orders/undefined`  
**ä¿®å¤:** å‰ç«¯æ”¹ä¸º `order.order_id`

---

## ğŸŸ¢ è½»å¾®é—®é¢˜

### L1. font warning
æ„å»ºæ—¶æœ‰ custom font warningï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰

### L2. è®¢å•åˆ—è¡¨åˆå¹¶
`/orders` é¡µé¢æŠŠ `as_customer` å’Œ `as_maker` åˆåœ¨ä¸€èµ·å±•ç¤ºï¼Œæ²¡æœ‰åŒºåˆ†æ ‡ç­¾

### L3. èŠ‚ç‚¹åˆ—è¡¨è¿”å›æ ¼å¼
`GET /nodes` è¿”å› `{nodes: [...]}` å¯¹è±¡ï¼Œå‰ç«¯ fetchNodes æœŸæœ›ç›´æ¥æ˜¯æ•°ç»„  

### L4. Agentåˆ—è¡¨API
`GET /ai-agents` è¿”å› `{total, page, agents: [...]}` â€” å‰ç«¯éœ€è¦æ­£ç¡®è§£åŒ…

---

## ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»

| ç±»åˆ« | æ•°é‡ |
|------|------|
| ğŸ”´ ä¸¥é‡ | 4 |
| ğŸŸ¡ ä¸­ç­‰ | 4 |
| ğŸŸ¢ è½»å¾® | 4 |
| **æ€»è®¡** | **12** |

### APIç«¯ç‚¹æµ‹è¯•ç»“æœ
| ç«¯ç‚¹ | çŠ¶æ€ |
|------|------|
| 10ä¸ªå…¬å¼€ç«¯ç‚¹ | âœ… å…¨éƒ¨200 |
| 4ä¸ªè®¤è¯ç«¯ç‚¹ | âœ… å…¨éƒ¨200 |
| è®¢å•åˆ›å»º | âœ… æˆåŠŸ |
| è®¢å•æŸ¥çœ‹ | âš ï¸ æ ¼å¼éœ€è§£åŒ… |
| è®¢å•å–æ¶ˆ | âŒ è°ƒé”™ç«¯ç‚¹ |
| ç¤¾åŒºæŠ•ç¥¨ | âŒ å­—æ®µåä¸åŒ¹é… |
| ç¤¾åŒºå‘å¸– | âœ… æˆåŠŸ |
| ç¤¾åŒºè¯„è®º | âœ… æˆåŠŸ |
| èŠ‚ç‚¹åŒ¹é… | âœ… æˆåŠŸ |

---

*è›‹è›‹ğŸ¥š | 2026-02-23 23:47*
