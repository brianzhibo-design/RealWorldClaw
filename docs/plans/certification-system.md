# RealWorldClaw 认证体系设计草案

> 版本: v0.1 | 日期: 2025-02-24 | 作者: 蛋蛋(GM)

## 概述

三类认证，分阶段上线：硬件兼容认证 → 安全等级认证 → 社区信誉分。

---

## 1. 硬件兼容认证 (Hardware Compatibility)

### 认证等级

| 等级 | 标志 | 含义 |
|------|------|------|
| 🟢 Verified | ✅ | 通过自动化测试套件，协议完全兼容 |
| 🟡 Community | 🧪 | 社区成员报告可用，未经官方验证 |
| 🔴 Untested | ❓ | 未测试，使用者自担风险 |

### 认证流程

1. **提交模块 manifest** → 自动校验 schema 合规
2. **模拟器测试** → 用 Module Emulator 跑标准测试套件
3. **真机测试**（可选）→ 提交测试报告 + 照片/视频证据
4. **审核** → 维护者或认证 Maker 复核
5. **颁发认证** → manifest 加 `certified: true` + 有效期（12个月）

### 自动化测试套件覆盖

- 协议握手 + 能力声明
- 遥测数据格式校验
- 命令执行 + 响应格式
- 断网降级行为
- E-stop 响应时间 ≤ 500ms

---

## 2. 安全等级认证 (Security Rating)

### 等级定义

| 等级 | 适用场景 | 要求 |
|------|---------|------|
| S0 - Basic | 非关键感知（温湿度、光照） | 协议合规 + 基本认证 |
| S1 - Standard | 低风险执行（灯光、窗帘） | S0 + 命令鉴权 + 审计日志 |
| S2 - Enhanced | 中风险执行（门锁、供暖） | S1 + 二次确认 + 固件签名 + 加密通信 |
| S3 - Critical | 高风险（电力、燃气、安防） | S2 + 硬件安全芯片 + 独立安全审计 |

### 认证要求矩阵

| 要求 | S0 | S1 | S2 | S3 |
|------|----|----|----|----|
| 协议合规 | ✅ | ✅ | ✅ | ✅ |
| 设备认证 (API Key) | - | ✅ | ✅ | ✅ |
| TLS / 加密通信 | - | - | ✅ | ✅ |
| 命令二次确认 | - | - | ✅ | ✅ |
| 固件签名验证 | - | - | ✅ | ✅ |
| 审计日志 | - | ✅ | ✅ | ✅ |
| 硬件安全元件 | - | - | - | ✅ |
| 第三方安全审计 | - | - | - | ✅ |

### 当前阶段

MVP 只实施 S0 + S1。S2/S3 在有真实高风险模块接入时再推进。

---

## 3. 社区信誉分 (Community Reputation)

### 积分来源

| 行为 | 分数 |
|------|------|
| 发布 Verified 模块设计 | +50 |
| 完成 Maker 订单（好评） | +20 |
| 提交 bug 报告 | +5 |
| 贡献代码（merged PR） | +10 |
| 帮助他人（论坛回答被采纳） | +5 |
| 差评/纠纷败诉 | -30 |
| 发布不合规模块 | -50 |

### 信誉等级

| 分数范围 | 等级 | 特权 |
|---------|------|------|
| 0-49 | 新手 | 基础功能 |
| 50-199 | 贡献者 | 可申请 Maker 认证 |
| 200-499 | 专家 | 可参与模块审核 |
| 500+ | 核心成员 | 可参与协议治理投票 |

### 防刷机制

- 同一用户每日积分上限 +30
- 新账号 7 天冷却期
- 异常行为自动冻结 + 人工复核

---

## 实施优先级

1. **现在**：硬件兼容认证 S0（自动化校验已有 validate.py）
2. **Q2**：安全等级 S0/S1 + 社区信誉分 MVP
3. **Q3**：S2 认证 + 完整信誉系统
4. **Q4+**：S3 认证（需第三方审计合作伙伴）

## 下一步

- [ ] 扩展 validate.py 支持硬件兼容认证自动化
- [ ] 设计认证徽章 UI 组件
- [ ] 起草社区信誉分的数据库 schema
