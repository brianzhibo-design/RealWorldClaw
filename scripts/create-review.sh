#!/bin/bash
# RealWorldClaw é¡¹ç›®å®¡æŸ¥åˆ›å»ºè„šæœ¬

set -e

REVIEW_TYPE=${1:-monthly}
DATE=$(date +%Y-%m-%d)
REVIEW_DIR="docs/reviews/${DATE}-${REVIEW_TYPE}"

echo "ğŸ” åˆ›å»ºé¡¹ç›®å®¡æŸ¥: ${REVIEW_TYPE} (${DATE})"

# åˆ›å»ºå®¡æŸ¥ç›®å½•
mkdir -p "$REVIEW_DIR/metrics"

# åˆ›å»ºå®¡æŸ¥æ¨¡æ¿æ–‡ä»¶
cat > "$REVIEW_DIR/00-executive-summary.md" << EOF
# é¡¹ç›®å®¡æŸ¥æ‰§è¡Œæ‘˜è¦

**å®¡æŸ¥æ—¥æœŸ**: ${DATE}  
**å®¡æŸ¥ç±»å‹**: ${REVIEW_TYPE}  
**å®¡æŸ¥è´Ÿè´£äºº**: RealWorldClaw Team  

## å…³é”®å‘ç°
1. 
2. 
3. 

## é¡¹ç›®è¯„åˆ†
- **å½“å‰è¯„åˆ†**: _/10
- **ä¸Šæ¬¡è¯„åˆ†**: _/10
- **å˜åŒ–è¶‹åŠ¿**: â†—ï¸/â†˜ï¸/â¡ï¸

## ç´§æ€¥è¡ŒåŠ¨é¡¹
- [ ] P0: 
- [ ] P0: 

## ä¸‹é˜¶æ®µé‡ç‚¹
1. 
2. 
3. 

---
*ç”Ÿæˆæ—¶é—´: $(date)*
EOF

cat > "$REVIEW_DIR/01-technical-review.md" << EOF
# æŠ€æœ¯æ¶æ„å®¡æŸ¥

**å®¡æŸ¥äºº**: RealWorldClaw Team (å‰ç«¯) + RealWorldClaw Team (åç«¯)  
**è¯„åˆ†**: _/10

## æ¶æ„å¥åº·åº¦
- [ ] API è®¾è®¡åˆç†æ€§
- [ ] æ•°æ®åº“æ€§èƒ½
- [ ] å‰ç«¯ç»„ä»¶å¤ç”¨
- [ ] éƒ¨ç½²ç¨³å®šæ€§
- [ ] ç›‘æ§å®Œæ•´æ€§

## æŠ€æœ¯å€ºåŠ¡
| ä¼˜å…ˆçº§ | é—®é¢˜ | å½±å“ | é¢„ä¼°å·¥æ—¶ |
|--------|------|------|----------|
| P0 | | | |
| P1 | | | |

## æ”¹è¿›å»ºè®®
1. 
2. 
3. 

## é£é™©é¢„è­¦
- 
EOF

cat > "$REVIEW_DIR/02-business-review.md" << EOF
# å•†ä¸šæ¨¡å¼å®¡æŸ¥

**å®¡æŸ¥äºº**: RealWorldClaw Team  
**è¯„åˆ†**: _/10

## å¸‚åœºå®šä½
- **ç›®æ ‡ç”¨æˆ·**: 
- **ä»·å€¼ä¸»å¼ **: 
- **å·®å¼‚åŒ–ä¼˜åŠ¿**: 

## ç«äº‰åˆ†æ
| ç«å“ | ä¼˜åŠ¿ | åŠ£åŠ¿ | å¨èƒç¨‹åº¦ |
|------|------|------|----------|
| | | | |

## å•†ä¸šæŒ‡æ ‡
- **ç”¨æˆ·å¢é•¿**: 
- **ç•™å­˜ç‡**: 
- **è·å®¢æˆæœ¬**: 

## æ”¹è¿›å»ºè®®
1. 
2. 
3. 
EOF

cat > "$REVIEW_DIR/03-ux-review.md" << EOF
# ç”¨æˆ·ä½“éªŒå®¡æŸ¥

**å®¡æŸ¥äºº**: RealWorldClaw Team + RealWorldClaw Team  
**è¯„åˆ†**: _/10

## ç”¨æˆ·æ—…ç¨‹åˆ†æ
- **æ–°æ‰‹ä¸Šæ‰‹**: 
- **å¼€å‘ä½“éªŒ**: 
- **æ–‡æ¡£è´¨é‡**: 

## ç—›ç‚¹è¯†åˆ«
1. 
2. 
3. 

## ä½“éªŒæ”¹è¿›
- [ ] 
- [ ] 
- [ ] 

## ç”¨æˆ·åé¦ˆ
- 
EOF

cat > "$REVIEW_DIR/04-quality-review.md" << EOF
# è´¨é‡ä¸æµ‹è¯•å®¡æŸ¥

**å®¡æŸ¥äºº**: RealWorldClaw Team  
**è¯„åˆ†**: _/10

## æµ‹è¯•è¦†ç›–ç‡
- **åç«¯API**: _%
- **å‰ç«¯ç»„ä»¶**: _%  
- **é›†æˆæµ‹è¯•**: _%

## è´¨é‡æŒ‡æ ‡
- **Bugå¯†åº¦**: 
- **å¹³å‡ä¿®å¤æ—¶é—´**: 
- **çº¿ä¸Šå¯ç”¨æ€§**: 

## å®‰å…¨è¯„ä¼°
- [ ] æƒé™æ¨¡å‹
- [ ] æ•°æ®åŠ å¯†
- [ ] è¾“å…¥éªŒè¯
- [ ] å®¡è®¡æ—¥å¿—

## æ”¹è¿›è®¡åˆ’
1. 
2. 
3. 
EOF

cat > "$REVIEW_DIR/05-recommendations.md" << EOF
# ç»¼åˆå»ºè®®ä¸è¡ŒåŠ¨è®¡åˆ’

**æ•´åˆäºº**: RealWorldClaw Team

## ä¼˜å…ˆçº§å»ºè®®
### P0 - ç«‹å³æ‰§è¡Œ (æœ¬å‘¨)
- [ ] 
- [ ] 

### P1 - çŸ­æœŸ (30å¤©)
- [ ] 
- [ ] 

### P2 - ä¸­æœŸ (90å¤©)
- [ ] 
- [ ] 

## èµ„æºåˆ†é…
- **æŠ€æœ¯å›¢é˜Ÿ**: 
- **äº§å“å›¢é˜Ÿ**: 
- **è¿è¥å›¢é˜Ÿ**: 

## ä¸‹æ¬¡å®¡æŸ¥
- **æ—¥æœŸ**: 
- **è§¦å‘æ¡ä»¶**: 
- **é‡ç‚¹å…³æ³¨**: 
EOF

# æ”¶é›†åŸºç¡€æŒ‡æ ‡
echo "ğŸ“Š æ”¶é›†é¡¹ç›®æŒ‡æ ‡..."

# Git æäº¤ç»Ÿè®¡
git log --since="30 days ago" --oneline | wc -l > "$REVIEW_DIR/metrics/commits-30d.txt"

# æµ‹è¯•è¦†ç›–ç‡ï¼ˆå¦‚æœæœ‰ï¼‰
if [ -f "platform/coverage.xml" ]; then
    cp platform/coverage.xml "$REVIEW_DIR/metrics/"
fi

# API å¥åº·æ£€æŸ¥
curl -s https://realworldclaw-api.fly.dev/api/v1/health > "$REVIEW_DIR/metrics/api-health.json" 2>/dev/null || echo "API unreachable" > "$REVIEW_DIR/metrics/api-health.txt"

echo "âœ… å®¡æŸ¥æ¨¡æ¿åˆ›å»ºå®Œæˆ: $REVIEW_DIR"
echo ""
echo "ğŸ“‹ ä¸‹ä¸€æ­¥:"
echo "1. åˆ†é…å®¡æŸ¥ä»»åŠ¡ç»™å„å›¢é˜Ÿæˆå‘˜"
echo "2. 72å°æ—¶å†…å®Œæˆå„ç»„å®¡æŸ¥"
echo "3. RealWorldClaw Teamæ•´åˆæœ€ç»ˆæŠ¥å‘Š"
echo ""
echo "ğŸš€ å¼€å§‹å®¡æŸ¥: cd $REVIEW_DIR && ls -la"